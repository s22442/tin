import{d as b,r as g,o as P,c as k,a as u,t as M,w as C,v as U,p as N,b as O,u as j,n as D,e as G,f as y,g as E,h as $,T as V,i as A,j as p,k as w,l as H,F as R,m as K,q as J,s as Q,x as T,y as W}from"./vendor.b80c49f8.js";const X=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};X();var L=(n,i)=>{const s=n.__vccOpts||n;for(const[a,e]of i)s[a]=e;return s};const I=n=>(N("data-v-0e4d43bb"),n=n(),O(),n),Y={id:"controls"},Z={class:"controls__stats"},ee=I(()=>u("div",null,"Moves:",-1)),se={class:"controls__stats__value"},te=I(()=>u("div",null,null,-1)),le=I(()=>u("div",null,"Time:",-1)),oe={class:"controls__stats__value"},ne={class:"controls__options"},ae={class:"controls__options__size"},ue=I(()=>u("div",null,"x",-1)),ie=b({props:{hSize:null,vSize:null,moveCount:null,time:null},emits:["update:size","shufflePuzzle"],setup(n,{emit:i}){const s=n,a=g(s.hSize),e=g(s.vSize),t=_=>_>1&&_<10&&!(_%1),c=()=>t(a.value)&&t(e.value),d=()=>{c()&&a.value*e.value>4?i("update:size",{h:a.value,v:e.value}):(a.value=s.hSize,e.value=s.vSize)},h=()=>{i("shufflePuzzle")};return(_,f)=>(P(),k("div",Y,[u("div",Z,[ee,u("div",se,M(n.moveCount),1),te,le,u("div",oe,M(`${n.time}s`),1)]),u("div",ne,[u("div",ae,[C(u("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>a.value=v),class:"controls__options__size__input",type:"number"},null,512),[[U,a.value]]),ue,C(u("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>e.value=v),class:"controls__options__size__input",type:"number"},null,512),[[U,e.value]]),u("div",{class:"controls__options__btn",onClick:d}," Update size ")]),u("div",{class:"controls__options__btn",onClick:h},"Shuffle")])]))}});var re=L(ie,[["__scopeId","data-v-0e4d43bb"]]),F="/tin/zjazd7/vue/dist/assets/mikhail-vasilyev-NodtnCsLdTE-unsplash.84de7dd3.jpg";const ce=n=>(N("data-v-20ad6080"),n=n(),O(),n),_e=ce(()=>u("div",{class:"single-puzzle__cover"},null,-1)),de=[_e],ve=b({props:{canMove:{type:Boolean},isBlank:{type:Boolean},bgPosition:null},setup(n){const i=n;j(a=>({"3b18c156":s,"09ba7155":i.bgPosition}));const s=`url(${new URL(F,self.location).href})`;return(a,e)=>(P(),k("div",{class:D(["single-puzzle",[n.canMove&&"single-puzzle--moveable",n.isBlank&&"single-puzzle--blank"]])},de,2))}});var ze=L(ve,[["__scopeId","data-v-20ad6080"]]);const pe={id:"puzzle"},he=["src"],fe={class:"puzzle__container"},me={class:"puzzle__cover"},ge=["src"],Pe=b({props:{hSize:null,vSize:null,arePuzzleOrderedCorrectly:{type:Boolean},basePuzzle:null,userPuzzle:null},emits:["swapUserPuzzle"],setup(n,{emit:i}){const s=n;j(o=>({"0d6f5a6e":s.hSize,"0e34a37c":s.vSize}));const a=new URL(F,self.location).href,e=g(!1);(()=>{const o=new Image;o.src=a,o.onload=async()=>{await G(),e.value=!0}})();const t=o=>o%s.hSize,c=o=>Math.floor(o/s.hSize),d=y(()=>s.userPuzzle.indexOf(s.hSize*s.vSize-1)),h=y(()=>t(d.value)),_=y(()=>c(d.value)),f=o=>o===d.value,v=o=>{const z=s.basePuzzle.indexOf(o),m=t(z),x=c(z),B=m/(s.hSize-1),q=x/(s.vSize-1);return`${B*100}% ${q*100}%`},S=o=>{const z=t(o),m=c(o);return z===h.value&&Math.abs(m-_.value)===1||m===_.value&&Math.abs(z-h.value)===1},l=y(()=>s.userPuzzle.map((o,z)=>f(z)?{id:o,isBlank:!0}:{id:o,bgPosition:v(o),canMove:S(z)})),r=o=>{!S(o)||i("swapUserPuzzle",{indexA:o,indexB:d.value})};return(o,z)=>(P(),E(V,{"enter-active-class":"fade-in",appear:""},{default:$(()=>[C(u("div",pe,[u("img",{class:"puzzle__img",src:p(a)},null,8,he),u("div",fe,[w(K,{name:"puzzle__container__transition"},{default:$(()=>[(P(!0),k(R,null,H(p(l),(m,x)=>(P(),E(p(ze),J({key:m.id},m,{onClick:B=>r(x)}),null,16,["onClick"]))),128))]),_:1})]),w(V,{"enter-active-class":"fade-in","leave-active-class":"fade-out"},{default:$(()=>[C(u("div",me,[u("img",{class:"puzzle__cover__img",src:p(a)},null,8,ge)],512),[[A,n.arePuzzleOrderedCorrectly]])]),_:1})],512),[[A,e.value]])]),_:1}))}});var ye=L(Pe,[["__scopeId","data-v-aed3023e"]]);const Se=b({setup(n){const i=g(3),s=g(3),a=({h:l,v:r})=>{i.value=l,s.value=r},e=y(()=>Array.from({length:i.value*s.value},(l,r)=>r)),t=Q([]),c=y(()=>{for(let l=0;l<e.value.length;l++)if(e.value[l]!==t[l])return!1;return!0}),d=g(0),h=g(0);let _;const f=()=>{const l=e.value.slice(0,-1);for(let r=l.length-1;r>0;r--){const o=Math.floor(Math.random()*(r+1));[l[r],l[o]]=[l[o],l[r]]}return l.push(e.value[e.value.length-1]),l},v=()=>{do t.splice(0,t.length,...f());while(c.value);d.value=0,h.value=0},S=({indexA:l,indexB:r})=>{[t[l],t[r]]=[t[r],t[l]],d.value++};return T(d,l=>{if(l===0){clearInterval(_);return}l===1&&(clearInterval(_),_=setInterval(()=>{h.value++},1e3))}),T(c,l=>{l&&clearInterval(_)}),T(e,v),v(),(l,r)=>(P(),k(R,null,[w(p(re),{"h-size":i.value,"v-size":s.value,"move-count":d.value,time:h.value,"onUpdate:size":a,onShufflePuzzle:v},null,8,["h-size","v-size","move-count","time"]),w(p(ye),{"h-size":i.value,"v-size":s.value,"are-puzzle-ordered-correctly":p(c),"base-puzzle":p(e),"user-puzzle":p(t),onSwapUserPuzzle:S},null,8,["h-size","v-size","are-puzzle-ordered-correctly","base-puzzle","user-puzzle"])],64))}});W(Se).mount("#app");
